(this.webpackJsonpcrud_php=this.webpackJsonpcrud_php||[]).push([[0],{29:function(e,t,a){e.exports=a(41)},35:function(e,t,a){},36:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),l=a.n(i),c=(a(34),a(35),a(7)),o=a(8),u=a(10),s=a(9),d=a(5),h=a(11),m=(a(36),a(46)),p=a(44),E=a(48),f=a(43),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={error:null,products:[],response:{},url:"http://localhost:1300/api/"},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table:"products"})};fetch(this.state.url+"select-all",t).then((function(e){return e.json()})).then((function(t){e.setState({products:t})}),(function(t){e.setState({error:t})}))}},{key:"deleteProduct",value:function(e){var t=this,a=this.state.products,n={table:"products",where:{field:"id = ?",value:[e]}},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch(this.state.url+"delete",r).then((function(e){return e.json()})).then((function(n){t.setState({response:n,products:a.filter((function(t){return t.id!==e}))})}),(function(e){t.setState({error:e})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,n=t.products;return a?r.a.createElement("div",null,"Error: ",a.message):r.a.createElement("div",null,r.a.createElement("h2",null,"Product List"),this.state.response.message&&r.a.createElement(E.a,{variant:"info"},this.state.response.message),r.a.createElement(f.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#ID"),r.a.createElement("th",null,"Product Name"),r.a.createElement("th",null,"SKU"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,n.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.productName),r.a.createElement("td",null,t.sku),r.a.createElement("td",null,t.price),r.a.createElement("td",null,r.a.createElement(p.a,{variant:"info",onClick:function(){return e.props.editProduct(t.id)}},"Edit"),"\xa0",r.a.createElement(p.a,{variant:"danger",onClick:function(){return e.deleteProduct(t.id)}},"Delete")))})))))}}]),t}(r.a.Component),v=a(24),S=a(45),P=a(25),y=a(47),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).initialState={id:"",productName:"",price:"",sku:""},e.product?a.state=e.product:a.state=a.initialState,a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(v.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onFormSubmit(this.state),this.setState(this.initialState)}},{key:"render",value:function(){var e;return e=this.state.id?r.a.createElement("h2",null,"Edit Product"):r.a.createElement("h2",null,"Add Product"),r.a.createElement("div",null,e,r.a.createElement(S.a,null,r.a.createElement(P.a,{sm:6},r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a.Group,{controlId:"productName"},r.a.createElement(y.a.Label,null,"Product Name"),r.a.createElement(y.a.Control,{type:"text",name:"productName",value:this.state.productName,onChange:this.handleChange,placeholder:"Product Name"})),r.a.createElement(y.a.Group,{controlId:"sku"},r.a.createElement(y.a.Label,null,"SKU"),r.a.createElement(y.a.Control,{type:"text",name:"sku",value:this.state.sku,onChange:this.handleChange,placeholder:"SKU"})),r.a.createElement(y.a.Group,{controlId:"price"},r.a.createElement(y.a.Label,null,"Price"),r.a.createElement(y.a.Control,{type:"text",name:"price",value:this.state.price,onChange:this.handleChange,placeholder:"Price"})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Control,{type:"hidden",name:"id",value:this.state.id}),r.a.createElement(p.a,{variant:"success",type:"submit"},"Save"))))))}}]),t}(r.a.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).editProduct=function(e){var t={table:"products",where:{field:"id = ?",value:[e]}},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(a.state.url+"select-one",n).then((function(e){return e.json()})).then((function(e){a.setState({product:e,isEditProduct:!0,isAddProduct:!0})}),(function(e){a.setState({error:e})}))},a.state={isAddProduct:!1,error:null,response:{},product:{},isEditProduct:!1,url:"http://localhost:1300/api/"},a.onFormSubmit=a.onFormSubmit.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"onCreate",value:function(){this.setState({isAddProduct:!0})}},{key:"onFormSubmit",value:function(e){var t,a=this,n={table:"products"};this.state.isEditProduct?(t="update",n.data="productName = '"+e.productName+"', price = '"+e.price+"', sku = '"+e.sku+"'",n.where={field:"id = ?",value:[e.id]}):(t="add",n.data={field:"productName, price, sku",value:[[e.productName,e.price,e.sku]]});var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch(this.state.url+t,r).then((function(e){return e.json()})).then((function(e){a.setState({response:e,isAddProduct:!1,isEditProduct:!1})}),(function(e){a.setState({error:e})}))}},{key:"render",value:function(){var e,t=this;return(this.state.isAddProduct||this.state.isEditProduct)&&(e=r.a.createElement(j,{onFormSubmit:this.onFormSubmit,product:this.state.product})),r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement("h1",{style:{textAlign:"center"}},"React Tutorial"),!this.state.isAddProduct&&r.a.createElement(p.a,{variant:"primary",onClick:function(){return t.onCreate()}},"Add Product"),"success"===this.state.response.status&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(E.a,{variant:"info"},this.state.response.message)),!this.state.isAddProduct&&r.a.createElement(b,{editProduct:this.editProduct}),e,this.state.error&&r.a.createElement("div",null,"Error: ",this.state.error.message)))}}]),t}(n.Component);l.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.7bc494b0.chunk.js.map